(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{30:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),c=n.n(a),o=n(11),i=n.n(o),s=(n(30),n(31),n(6)),u=n(13),l=n(8),f=n(43),d=n(44),g=n(22),j=n(46),b=n(45),O=(n(39),"rect"),p="ellipse",h="ADD_FIGURE",y="DELETE_FIGURE",m="CLEAR_STATE",x="SET_FIGURES",v="LOAD_FIGURES",S=function(e){return function(t){t(function(e){return{type:y,payload:e}}(e))}},w=function(){var e=JSON.stringify(JSON.parse(localStorage.getItem("figures")));if(e){var t=document.createElement("a"),n=new Blob([e],{type:"application/json;charset=utf-8"});t.href=URL.createObjectURL(n),t.download="output.json",document.body.appendChild(t),t.click()}else alert("No data to download!")},F=80,N=50,D={width:F,height:N,border:"1px solid #000",borderRadius:"50%",background:"#00f"},R={width:F,height:N,border:"1px solid #000",background:"#0e8206"},k=Object(l.b)((function(e){return{figures:e.reducer_figures.figures}}),{deleteFigure:S,addFigure:function(e){return function(t){t(function(e){return{type:h,payload:e}}(e))}},setFigures:function(e){return function(t){t(function(e){return{type:x,payload:e}}(e))}}})((function(e){var t=e.canvasColRef,n=e.figures,a=e.size,c=e.canvasRef,o=e.setMouse,i=e.mouse,u=e.setSelected,l=e.selected,f=e.deleteFigure,d=e.addFigure,g=e.setFigures;return Object(r.jsx)("canvas",{width:a.width,height:a.height,onMouseMove:function(e){e.stopPropagation();var r=e.pageX-t.current.offsetLeft,a=e.pageY-t.current.offsetTop;o((function(e){return Object(s.a)(Object(s.a)({},e),{},{x:r,y:a,out:!1})})),l&&i.down&&g(n.map((function(e){return e===l&&(e.x=i.x-40,e.y=i.y-25),e})))},onMouseDown:function(e){e.stopPropagation();var t=!1;o((function(e){return Object(s.a)(Object(s.a)({},e),{},{down:!0})})),n.forEach((function(e){if(function(e,t,n){return e>n.x&&e<n.x+F&&t>n.y&&t<n.y+N}(i.x,i.y,e)){var n=e;u(e),f(e),d(n),t=!0}})),t||u(!1)},onMouseUp:function(e){e.stopPropagation(),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{down:!1})}))},onMouseOut:function(e){i.down&&l&&(f(l),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{out:!0})})))},onMouseOver:function(e){e.stopPropagation(),l&&i.down&&(d(l),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{out:!1})})))},onDragOver:function(e){e.preventDefault();var n=e.pageX-t.current.offsetLeft,r=e.pageY-t.current.offsetTop;o((function(e){return Object(s.a)(Object(s.a)({},e),{},{x:n,y:r})}))},onDrop:function(e){e.stopPropagation();var t=e.dataTransfer.getData("type"),n={x:i.x-40,y:i.y-25,type:t};d(n),u(n)},ref:c})})),E=function(e){var t=e.style,n=e.onDragStart;return Object(r.jsx)("div",{draggable:!0,style:t,onDragStart:function(e){return n(e,p)}})},T=function(e){var t=e.style,n=e.onDragStart;return Object(r.jsx)("div",{draggable:!0,style:t,onDragStart:function(e){return n(e,O)}})},C=Object(l.b)((function(e){return{figures:e.reducer_figures.figures}}),{deleteFigure:S,clearState:function(){return function(e){e({type:m})}},loadFigure:function(e){return function(t){t(function(e){return{type:v,payload:e}}(e))}}})((function(e){var t=e.figures,n=e.deleteFigure,c=e.clearState,o=e.loadFigure,i=Object(a.useState)({height:0,width:0}),l=Object(u.a)(i,2),h=l[0],y=l[1],m=Object(a.useState)(!1),x=Object(u.a)(m,2),v=x[0],S=x[1],C=Object(a.useState)({}),I=Object(u.a)(C,2),M=I[0],J=I[1],L=Object(a.useRef)(null),P=Object(a.useRef)(null);Object(a.useEffect)((function(){L.current&&y(Object(s.a)(Object(s.a)({},h),{},{height:L.current.offsetHeight,width:L.current.offsetWidth}))}),[L]);var U=function(e,t){e.dataTransfer.setData("type",t)};return Object(a.useEffect)((function(){var e=P.current.getContext("2d");e.clearRect(0,0,h.width,h.height),e.beginPath(),t.forEach((function(t){!function(e,t){switch(t.lineWidth=1,e===v&&(t.lineWidth=4),t.strokeStyle="black",e.type){case O:t.fillStyle=R.background,t.fillRect(e.x,e.y,F,N),t.strokeRect(e.x,e.y,F,N),t.stroke();break;case p:t.fillStyle=D.background,t.ellipse(e.x+40,e.y+25,40,25,0,0,2*Math.PI),t.fill(),t.stroke(),t.beginPath()}}(t,e)})),document.onkeydown=function(e){"Delete"===e.key&&v&&(n(v),S(!1))}}),[h,v,t,M]),Object(r.jsx)("div",{className:"fullscreen",onMouseUp:function(e){v&&M.down&&M.out&&(S(!1),J((function(e){return Object(s.a)(Object(s.a)({},e),{},{down:!1})})))},children:Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(d.a,{className:"headTable",children:[Object(r.jsx)(g.a,{className:"borderT",sm:4,md:4,lg:4,children:"Figures"}),Object(r.jsx)(g.a,{className:"borderT",sm:8,md:8,lg:8,children:"Canvas"})]}),Object(r.jsxs)(d.a,{className:"contentBlock",children:[Object(r.jsxs)(g.a,{className:"borderT",sm:4,md:4,lg:4,children:[Object(r.jsx)(d.a,{className:"justify-content-md-center",style:{padding:10},children:Object(r.jsx)(E,{style:D,onDragStart:U})}),Object(r.jsx)(d.a,{className:"justify-content-md-center",style:{padding:10},children:Object(r.jsx)(T,{style:R,onDragStart:U})}),Object(r.jsx)(d.a,{className:"justify-content-md-center",style:{padding:10},children:Object(r.jsx)(j.a,{variant:"warning",onClick:c,children:"Clear Local Storage"})}),Object(r.jsx)(d.a,{className:"justify-content-md-center",style:{padding:10},children:Object(r.jsx)(j.a,{variant:"success",onClick:w,children:"Export to Json"})}),Object(r.jsx)(d.a,{className:"justify-content-md-center",style:{padding:10},children:Object(r.jsx)(b.a.File,{label:"Import from Json",accept:"application/json",custom:!0,onChange:function(e){return function(e,t){var n=e.target.files[0],r=new FileReader;r.readAsText(n),r.onload=function(){var e=r.result;t(JSON.parse(e))},r.onerror=function(){console.log(r.error)},r.loadend=function(){r.abort()},e.target.value=""}(e,o)}})})]}),Object(r.jsx)(g.a,{className:"borderT ",style:{padding:0},sm:8,md:8,lg:8,ref:L,children:L?Object(r.jsx)(k,{canvasColRef:L,size:h,canvasRef:P,mouse:M,setMouse:J,selected:v,setSelected:S}):"Canvas not Load"})]})]})})})),I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},M=n(7),J=n(18),L=JSON.parse(localStorage.getItem("figures")),P={figures:L||[]},U=Object(M.combineReducers)({reducer_figures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case y:return localStorage.setItem("figures",JSON.stringify(e.figures.filter((function(e){return e!==r})))),Object(s.a)(Object(s.a)({},e),{},{figures:e.figures.filter((function(e){return e!==r}))});case h:return localStorage.setItem("figures",JSON.stringify([].concat(Object(J.a)(e.figures),[r]))),Object(s.a)(Object(s.a)({},e),{},{figures:[].concat(Object(J.a)(e.figures),[r])});case x:return Object(s.a)(Object(s.a)({},e),{},{figures:r});case v:return localStorage.clear(),localStorage.setItem("figures",JSON.stringify(r)),Object(s.a)(Object(s.a)({},e),{},{figures:r});case m:return localStorage.clear(),Object(s.a)(Object(s.a)({},e),{},{figures:[]});default:return Object(s.a)({},e)}}}),_=n(23),A=n(24),B=[_.a],G=Object(M.createStore)(U,{},Object(A.composeWithDevTools)(M.applyMiddleware.apply(void 0,B)));i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(l.a,{store:G,children:Object(r.jsx)(C,{})})}),document.getElementById("root")),I()}},[[41,1,2]]]);
//# sourceMappingURL=main.ddccda1d.chunk.js.map